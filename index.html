<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Kern Rust - EU Vanilla+ Rust Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Kern Rust - EU Vanilla+ Rust server with a gritty survival experience, balanced gameplay and active administration."
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="bg-noise"></div>

    <header class="site-header">
      <div class="container header-inner">
        <div class="logo-block">
          <div class="logo-mark">KR</div>
          <div class="logo-text">
            <span class="logo-title">KERN RUST</span>
            <span class="logo-subtitle">EU Vanilla+ Rust Server</span>
          </div>
        </div>
        <nav class="nav-links">
          <a href="#about">About</a>
          <a href="#info">Server Info</a>
          <a href="#discord">Discord</a>
          <a href="#vote">Vote</a>
        </nav>
      </div>
    </header>

    <main>
      <!-- HERO SECTION -->
      <section class="hero">
        <div class="container hero-inner">
          <div class="hero-text">
            <p class="eyebrow">EU VANILLA+ • NO PAY TO WIN</p>
            <h1>Survive the grind. Trust no one.</h1>
            <p class="hero-subtitle">
              Kern Rust delivers a raw, cinematic survival experience.
              Balanced Vanilla+ settings, active administration and a
              no‑nonsense atmosphere for players who take Rust seriously.
            </p>

            <div class="hero-actions">
              <a class="btn primary" href="steam://connect/151.240.121.101:29021">
                Connect now
              </a>
              <a
                class="btn ghost"
                href="https://discord.gg/bhCYFCP5ze"
                target="_blank"
                rel="noopener noreferrer"
              >
                Join Discord
              </a>
            </div>

            <div class="hero-meta">
              <div class="meta-item">
                <span class="meta-label">Wipe schedule</span>
                <span class="meta-value">Every Friday • 13:00 CET</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">Map</span>
                <span class="meta-value">Procedural • Medium size</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">Region</span>
                <span class="meta-value">EU • Low ping</span>
              </div>
            </div>
          </div>

          <!-- SERVER STATUS PANEL -->
          <div class="hero-panel">
            <div class="status-card">
              <div class="status-header">
                <span class="status-dot online"></span>
                <span class="status-text">Server status</span>
              </div>

              <div class="status-body">
                <p class="status-main" id="server-online-text">Online</p>
                <p class="status-sub">
                  Players:
                  <span id="player-count">—</span> /
                  <span id="player-max">—</span><br />
                  Last wipe:
                  <span>Every Friday 13:00 CET (BP + map)</span><br />
                  Next wipe in:
                  <span id="wipe-countdown">calculating…</span>
                </p>
              </div>
            </div>

            <div class="ip-card">
              <div class="ip-label">Direct connect IP</div>
              <div class="ip-value">151.240.121.101:29021</div>
              <button
                class="btn small"
                onclick="navigator.clipboard.writeText('151.240.121.101:29021')"
              >
                Copy IP
              </button>
            </div>

            <div class="rules-snippet">
              <h3>Server philosophy</h3>
              <ul>
                <li>Vanilla+ feel – no pay to win.</li>
                <li>Active admins, minimal interference.</li>
                <li>No cheating, scripting or exploiting.</li>
                <li>Respectful but ruthless gameplay.</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- ABOUT -->
      <section id="about" class="section dark">
        <div class="container section-inner">
          <div class="section-header">
            <h2>Why Kern Rust?</h2>
            <p>
              Built for players who want a clean, fair and cinematic Rust
              experience without pay‑to‑win garbage or admin abuse.
            </p>
          </div>

          <div class="features-grid">
            <div class="feature-card">
              <h3>Vanilla+ balance</h3>
              <p>
                Core Rust experience with light quality‑of‑life tweaks.
              </p>
            </div>
            <div class="feature-card">
              <h3>Consistent wipes</h3>
              <p>
                Predictable Friday wipes at 13:00 CET.
              </p>
            </div>
            <div class="feature-card">
              <h3>Serious players</h3>
              <p>
                Built for players who enjoy long fights and teamwork.
              </p>
            </div>
            <div class="feature-card">
              <h3>Active administration</h3>
              <p>
                Hands‑on admins focused on stability and fairness.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- SERVER INFO -->
      <section id="info" class="section">
        <div class="container section-inner">
          <div class="section-header">
            <h2>Server information</h2>
            <p>Everything you need to know before you drop in.</p>
          </div>

          <div class="info-grid">
            <div class="info-card">
              <h3>Core settings</h3>
              <ul>
                <li><strong>Region:</strong> EU</li>
                <li><strong>Type:</strong> Vanilla+</li>
                <li><strong>Wipes:</strong> Fridays, 13:00 CET</li>
                <li><strong>Blueprints:</strong> Wiped weekly</li>
              </ul>
            </div>

            <div class="info-card">
              <h3>Gameplay</h3>
              <ul>
                <li><strong>Kits:</strong> None</li>
                <li><strong>TP / Home:</strong> None</li>
                <li><strong>Clans / Teams:</strong> Vanilla teams</li>
                <li><strong>Raid times:</strong> 24/7</li>
              </ul>
            </div>

            <div class="info-card">
              <h3>Technical</h3>
              <ul>
                <li><strong>DDOS protected hosting</strong></li>
                <li><strong>Optimized plugins only</strong></li>
                <li><strong>Active performance monitoring</strong></li>
                <li><strong>Low ping for EU players</strong></li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- DISCORD -->
      <section id="discord" class="section dark">
        <div class="container section-inner discord-section">
          <div>
            <div class="section-header">
              <h2>Join the community</h2>
              <p>
                Get wipe announcements, patch notes, reports and squad up with
                other Kern Rust players.
              </p>
            </div>

            <a
              class="btn primary"
              href="https://discord.gg/bhCYFCP5ze"
              target="_blank"
              rel="noopener noreferrer"
            >
              Join Kern Rust Discord
            </a>

            <p class="discord-tagline">
              Discord is required for reports, appeals and serious issues.
            </p>
          </div>

          <!-- DISCORD WIDGET -->
          <iframe
            src="https://discord.com/widget?id=1287095134160420927&theme=dark"
            width="100%"
            height="500"
            allowtransparency="true"
            frameborder="0"
            sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
          ></iframe>
        </div>
      </section>

      <!-- VOTE -->
      <section id="vote" class="section">
        <div class="container section-inner">
          <div class="section-header">
            <h2>Support the server</h2>
            <p>Voting helps new players discover Kern Rust.</p>
          </div>

          <div class="vote-grid">
            <div class="vote-card">
              <h3>RustServers.gg</h3>
              <p>Vote to support Kern Rust and help new players discover the server.</p>
              <a class="btn ghost small" href="https://rustservers.gg/server/5922046" target="_blank">
                Vote on RustServers.gg
              </a>
            </div>

            <div class="vote-card">
              <h3>Rust-Servers.net</h3>
              <p>Boost our visibility and help the community grow.</p>
              <a class="btn ghost small" href="https://rust-servers.net/server/177200/" target="_blank">
                Vote on Rust-Servers.net
              </a>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>&copy; <span id="year"></span> Kern Rust. All rights reserved.</span>
        <span class="footer-note">
          Unofficial Rust server. Not affiliated with Facepunch Studios.
        </span>
      </div>
    </footer>

    <!-- JAVASCRIPT -->
    <script>
      // Footer year
      document.getElementById("year").textContent =
        new Date().getFullYear().toString();

      // Wipe countdown – full BP + map hver fredag kl. 13:00 CET
      function getNextWipeDate() {
        const now = new Date();
        const next = new Date(now);

        const currentDay = now.getDay(); // 5 = fredag
        let daysToFriday = 5 - currentDay;
        if (daysToFriday < 0) daysToFriday += 7;

        next.setDate(now.getDate() + daysToFriday);
        next.setHours(13, 0, 0, 0);

        if (next <= now) next.setDate(next.getDate() + 7);

        return next;
      }

      const wipeTarget = getNextWipeDate();

      function updateWipeCountdown() {
        const now = new Date();
        const diff = wipeTarget - now;

        if (diff <= 0) {
          document.getElementById("wipe-countdown").textContent = "Wiping now";
          return;
        }

        const totalSeconds = Math.floor(diff / 1000);
        const days = Math.floor(totalSeconds / (3600 * 24));
        const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);

        let text = "";
        if (days > 0) text += days + "d ";
        text += hours.toString().padStart(2, "0") + "h ";
        text += minutes.toString().padStart(2, "0") + "m";

        document.getElementById("wipe-countdown").textContent = text;
      }

      updateWipeCountdown();
      setInterval(updateWipeCountdown, 60 * 1000);

      // -------------------------------
      // LIVE PLAYER COUNT VIA BATTLEMETRICS
      // -------------------------------

      async function updateRustPlayerCount() {
        const playerEl = document.getElementById("player-count");
        const maxEl = document.getElementById("player-max");

        try {
          const res = await fetch("https://api.battlemetrics.com/servers/37054330");
          const json = await res.json();

          const data = json.data.attributes;

          const players = data.players;
          const maxPlayers = data.maxPlayers;
          const status = data.status;

          // Update UI
          playerEl.textContent = players;
          maxEl.textContent = maxPlayers;

          // Update online/offline dot
          const dot = document.querySelector(".status-dot");
          const text = document.getElementById("server-online-text");

          if (status === "online") {
            dot.classList.add("online");
            text.textContent = "Online";
          } else {
            dot.classList.remove("online");
            text.textContent = "Offline";
          }
        } catch (err) {
          console.error("BattleMetrics API failed:", err);
          playerEl.textContent = "—";
          maxEl.textContent = "—";
        }
      }

      // Run immediately + every 60 sec
      updateRustPlayerCount();
      setInterval(updateRustPlayerCount, 60000);
    </script>
  </body>
</html>
